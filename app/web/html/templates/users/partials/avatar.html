{% if not user_icon %}
  {% set user_icon = 'user-thin' %}
{% endif %}
{% set user_icon_partial_path = 'shared/partials/icons/' + user_icon + '.html' %}
{% if current_user and current_user.avatar_location %}
  <img
    {% if current_user.avatar_location.startswith('/') %}
      src="{{ url_for('html:static', path=current_user.avatar_location) }}"
    {% else %}
      src="{{ current_user.avatar_location }}"
    {% endif %}
    alt="User's avatar"
    {% if class %}
      class="{{ class }}"
    {% endif %}
  />
{% else %}
  {{ render_partial(user_icon_partial_path, class=class) }}
{% endif %}
